kitpages_chain:
    shared_step_list:
        StepSample:
            class: '\Kitpages\ChainBundle\Tests\Sample\StepSample'
            parameter_list:
                return: 'changedByStepConfig1'
            service_list:
                listener: stepListener
        StepSampleOriginal:
            class: '\Kitpages\ChainBundle\Tests\Sample\StepSample'

        CustomPreventDefault:
            class: '\Kitpages\ChainBundle\Tests\Sample\StepSample'
            parameter_list:
                throw_exception: true


    chain_list:
        StandardChain:
            step_list:
                StepSample:
                    parent_shared_step: StepSample

        StandardChainAndStepParameter:
            step_list:
                StepSample:
                    parent_shared_step: StepSample
                    parameter_list:
                        return: 'ResultStandardChainAndStepParameter'

        CustomChainAndStepParameter:
            class: '\Kitpages\ChainBundle\Tests\Sample\ChainSample'
            step_list:
                StepSample:
                    parent_shared_step: StepSample
                    parameter_list:
                        return: 'ResultCustomChainAndStepParameter'

        CustomChainAndTwoSteps:
            class: '\Kitpages\ChainBundle\Tests\Sample\ChainSample'
            step_list:
                StepSample:
                    parent_shared_step: StepSample
                StepSampleOriginal:
                    parent_shared_step: StepSampleOriginal

        CustomStopPropagation:
            step_list:
                StepSample:
                    parent_shared_step: StepSample
                    parameter_list:
                        return: 'ResultStopPropagation'
                        isPropagationStopped: true
                StepSampleOriginal:
                    parent_shared_step: StepSampleOriginal
                    parameter_list:
                        return: 'ResultPropagationNotStopped'

        StandardChainAndNewStep:
            step_list:
                MyNewStep:
                    parent_shared_step: ~
                    class: '\Kitpages\ChainBundle\Tests\Sample\StepSample'
                    parameter_list:
                        return: 'ResultStandardChainAndNewStep'

services:
    stepListener:
        class: Kitpages\ChainBundle\Tests\Sample\StepListener
        tags:
            - { name: kernel.event_listener, event: kitpages_chain.on_step_execute, method: onStepExecute }
            - { name: kernel.event_listener, event: kitpages_chain.after_step_execute, method: afterStepExecute }

framework:
    secret: "test"
    test: ~
